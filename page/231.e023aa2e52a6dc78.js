"use strict";(self.webpackChunkadminMonster=self.webpackChunkadminMonster||[]).push([[231],{23231:(w,O,l)=>{l.r(O),l.d(O,{CuponesModule:()=>$});var r=l(96814),f=l(3057),t=l(46689),u=l(78645),h=l(91011),d=l(51215),v=l(23707);let g=(()=>{var n;class a{constructor(){this.servicioService=(0,t.f3M)(h.Co),this.servicio=null}ngOnInit(){this.servicioService.getOne(this.cupon.servicio_id).subscribe({next:e=>{console.log({resp:e}),this.servicio=e[0]},error:e=>{console.log({err:e})},complete:()=>{}})}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cupon-item-view"]],inputs:{cupon:"cupon"},decls:5,vars:3,consts:[["routerLinkActive","active",3,"routerLink"],[1,"status"]],template:function(e,o){1&e&&(t.TgZ(0,"a",0)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span",1),t._uU(4),t.qZA()()),2&e&&(t.MGl("routerLink","./",o.cupon.cupon_id,""),t.xp6(2),t.Oqu(o.cupon.nombre.toLocaleUpperCase()+"-"+(null==o.servicio?null:o.servicio.servicio)),t.xp6(2),t.hij(" ",1===o.cupon.status?"Activo":"Inactivo"," "))},dependencies:[f.rH,f.Od],styles:["a[_ngcontent-%COMP%]{text-decoration:none;border:1px solid gainsboro;padding:10px 20px;font-weight:700;cursor:pointer;border-radius:5px;color:var(--text-color);width:100%;display:flex;flex-direction:row;justify-content:space-between;font-size:12px}a[_ngcontent-%COMP%]:hover{background-color:#dcdcdc;color:var(--text-color)}.active[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff}.status[_ngcontent-%COMP%]{padding:5px 10px;background:gainsboro;color:var(--text-color);border-radius:8px}@media (max-width: 1024px){.status[_ngcontent-%COMP%]{position:initial}}"]}),a})();function x(n,a){1&n&&t._UZ(0,"cupon-item-view",15),2&n&&t.Q6J("cupon",a.$implicit)}let m=(()=>{var n;class a{constructor(){this.cupones=[],this.notificacionModalService=(0,t.f3M)(v.g),this.cuponService=(0,t.f3M)(h.pl),this.isClicked=!1,this.isHideInfo=!1}ngOnInit(){this.loadItems()}loadItems(){const e=new u.x,o=e.asObservable();this.onLoading(o),this.cuponService.getAll().subscribe({next:c=>{console.log({resp:c}),e.complete(),this.cupones=c},error:c=>{e.complete(),this.onError(c)},complete:()=>{}})}onChangeClick(){this.isClicked=!this.isClicked}onClickInfo(){this.isHideInfo=!this.isHideInfo}onSuccess(e){this.notificacionModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionModalService.show("Cargando",{size:d.$u.normal,positions:[d.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:25,vars:11,consts:[[1,"content"],[1,"steps"],[1,"info"],[1,"top",3,"click"],[1,"container-text"],[1,"title"],[1,"expand"],[1,"fa-solid","fa-caret-up","fa-2xl",2,"color","white"],[1,"process"],[1,"list-title"],["routerLink","./create"],[1,"list"],[3,"click"],[3,"cupon",4,"ngFor","ngForOf"],[1,"expand-info",3,"click"],[3,"cupon"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.NdJ("click",function(){return o.onChangeClick()}),t.TgZ(5,"div",4)(6,"span",5),t._uU(7,"Cupones"),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"i",7),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"span",5),t._uU(13,"Listado de Cupones"),t.qZA(),t.TgZ(14,"a",10)(15,"span"),t._uU(16,"Agregar Cupon"),t.qZA()()(),t._UZ(17,"hr"),t.TgZ(18,"div",11)(19,"button",12),t.NdJ("click",function(){return o.loadItems()}),t._uU(20,"Actualizar"),t.qZA(),t.YNc(21,x,1,1,"cupon-item-view",13),t.qZA()(),t.TgZ(22,"button",14),t.NdJ("click",function(){return o.onClickInfo()}),t.TgZ(23,"span"),t._uU(24,">"),t.qZA()()()()),2&e&&(t.ekj("onDisplay",o.isClicked)("collapsed",o.isHideInfo),t.xp6(1),t.ekj("expanded",o.isHideInfo),t.xp6(2),t.ekj("active",o.isClicked)("hidden",o.isHideInfo),t.xp6(18),t.Q6J("ngForOf",o.cupones))},dependencies:[f.lC,f.rH,r.sg,g],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;width:100vw;height:calc(100vh - var(--main-header-height));overflow-x:hidden;overflow-y:hidden;position:relative}.steps[_ngcontent-%COMP%]{position:relative;height:calc(100vh - var(--main-header-height));width:70vw;flex-direction:column;align-items:center;justify-content:center;animation:moveToLeft 1s forwards}@keyframes _ngcontent-%COMP%_mostrarInfo{0%{right:-35%}70%{right:0%}to{right:0}}@keyframes _ngcontent-%COMP%_ocultarInfo{to{right:-30%}30%{right:-10%}0%{right:0}}.info[_ngcontent-%COMP%]{height:calc(100vh - var(--main-header-height));width:30vw;position:absolute;right:-100%;animation:_ngcontent-%COMP%_mostrarInfo 1s forwards;background:white}.top[_ngcontent-%COMP%]{height:20%;background-color:var(--main-color);padding:10px;color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.process[_ngcontent-%COMP%]{border:2px solid gainsboro;height:100%;padding:20px;overflow-y:auto}.process[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}.process[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:25px}.process[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gray;border-radius:25px}.process[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:gray}.container-text[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;flex-direction:column;padding-left:20px}.text[_ngcontent-%COMP%], .second-text[_ngcontent-%COMP%]{font-weight:700;height:-moz-fit-content;height:fit-content;font-size:1.4em;letter-spacing:10px;width:100%;white-space:nowrap;overflow:hidden}.data-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12%;height:45%}.list-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:-moz-fit-content;height:fit-content;align-items:center;justify-content:space-between}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;height:-moz-fit-content;height:fit-content;width:100%;padding:10px;gap:5px}.list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#f04b46;color:#fff;cursor:pointer;border-radius:8px;font-weight:700}hr[_ngcontent-%COMP%]{margin:10px 0;border:1px solid gainsboro}.list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}rol-item-view[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]{background-color:#f04b46;color:#fff;padding:10px 20px;border-radius:8px;text-decoration:none;font-weight:700;cursor:pointer}a[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}@keyframes _ngcontent-%COMP%_cursor{50%{border-color:transparent}}@keyframes _ngcontent-%COMP%_typing{0%{width:0}}.expand[_ngcontent-%COMP%]{visibility:hidden}.expand-info[_ngcontent-%COMP%]{position:absolute;top:50%;background-color:var(--main-color);border:none;border-radius:100px;z-index:6;color:#fff;font-size:20px;padding:20px;left:-25px;font-weight:700;cursor:pointer;transition:.3s all ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;--webkit-transform: translateY(0);transform:translateY(10%)}to{opacity:1;--webkit-transform: translateY(0);transform:translateY(0)}}.steps[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{visibility:hidden;display:none}.process[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;font-weight:700}@media (min-width:1024px){.info[_ngcontent-%COMP%]{border:1px solid gainsboro}.info[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:none}.progress[_ngcontent-%COMP%]{flex:1 0 35%;min-width:300px;padding:10px 30px}@keyframes moveToLeft{0%{width:100vw}to{width:70vw}}@keyframes moveToRight{0%{width:70vw}30%{width:50vw}to{width:100vw}}.info.hidden[_ngcontent-%COMP%]{right:-35%;animation:_ngcontent-%COMP%_ocultarInfo 2s forwards}.info.hidden[_ngcontent-%COMP%]   .expand-info[_ngcontent-%COMP%]{left:-100px;rotate:180deg;transition:.3s all ease-in-out}.content.collapsed[_ngcontent-%COMP%]{grid-template-columns:4fr 1fr;transition:all .3s ease-in-out}.steps.expanded[_ngcontent-%COMP%]{width:100vw;animation:moveToRight 1.2s forwards}}@media (max-width:1024px){.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:.4s all ease-in-out}.content.onDisplay[_ngcontent-%COMP%]{display:flex;position:fixed;z-index:5;height:90vh;width:100vw;max-height:100%;inset:0;overflow-x:hidden;transition:.4s all ease-in-out}@keyframes moveToTop{0%{bottom:0%}50%{bottom:50%}to{top:100%}}.info[_ngcontent-%COMP%]{z-index:3;position:fixed;top:90%;height:10vh;width:100%;overflow:hidden;transition:.4s all ease-in-out}.steps[_ngcontent-%COMP%]{width:100vw;height:calc(90vh - var(--main-header-height));position:relative;flex-direction:column;align-items:end;justify-content:end}.steps.expanded[_ngcontent-%COMP%]{width:100vw}.info[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{height:10vh}.info.active[_ngcontent-%COMP%]{height:100vh;top:0%;transition:.4s all ease-in-out}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:50px}.second-text[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{font-size:15px}.info.active[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{rotate:180deg;transition:.3s all ease-in-out}.info[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:.3s all ease-in-out}.expand[_ngcontent-%COMP%]{visibility:visible;position:absolute;right:20px}.process[_ngcontent-%COMP%]{border:2px solid gainsboro;height:90vh;background:white}.expand-info[_ngcontent-%COMP%]{visibility:hidden}}"]}),a})();var s=l(56223),_=l(94664),C=l(88446),b=l(28633);let y=(()=>{var n;class a{constructor(){this.porcentaje=!1,this.absoluto=!1}ngOnInit(){null===this.typeDesc.value&&this.typeDesc.setValue(1),1===this.typeDesc.value&&(this.porcentaje=!0),2===this.typeDesc.value&&(this.absoluto=!0)}onSelect(e){1===e?this.absoluto=!1:this.porcentaje=!1,this.typeDesc.setValue(e)}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["switch-descuento"]],inputs:{typeDesc:"typeDesc"},decls:9,vars:2,consts:[[1,"container"],[1,"item"],["type","checkbox","name","masculino",3,"ngModel","ngModelChange","change"],["for","1"],["type","checkbox","name","femenino",3,"ngModel","ngModelChange","change"],["for","2"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("ngModelChange",function(p){return o.porcentaje=p})("change",function(){return o.onSelect(1)}),t.qZA(),t.TgZ(3,"label",3),t._uU(4,"Porcentaje"),t.qZA()(),t.TgZ(5,"div",1)(6,"input",4),t.NdJ("ngModelChange",function(p){return o.absoluto=p})("change",function(){return o.onSelect(2)}),t.qZA(),t.TgZ(7,"label",5),t._uU(8,"Monetario"),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngModel",o.porcentaje),t.xp6(4),t.Q6J("ngModel",o.absoluto))},dependencies:[s.Wl,s.JJ,s.On],styles:["label[_ngcontent-%COMP%]{padding-left:10px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-left:10px;flex-wrap:wrap;gap:10px}.item[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid var(--main-color);border-radius:8px;display:flex;align-items:center}input[type=checkbox][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:15px;height:15px;background-color:#fff;border-radius:8px;border:1px solid #999;position:relative;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--main-color)}input[type=checkbox][_ngcontent-%COMP%]:checked:before{visibility:visible}"]}),a})();function k(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.onUpdateState(1==o.list_cupones[0].status?2:1))}),t._uU(1),t.qZA()}if(2&n){const i=t.oxw(2);t.xp6(1),t.hij(" ",1==i.list_cupones[0].status?"Inhabilitar":"Activar"," ")}}function A(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",21),t.NdJ("click",function(){const c=t.CHM(i).$implicit,p=t.oxw(2);return t.KtG(p.selectItem(c))}),t.TgZ(2,"div",22),t._UZ(3,"input",23),t.TgZ(4,"span"),t._uU(5),t.qZA()()(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA()()}if(2&n){const i=a.$implicit;t.xp6(3),t.Q6J("checked",i.isSelected),t.xp6(2),t.Oqu(i.servicio),t.xp6(2),t.Oqu(t.gM2(8,4,i.precio_base,"USD","$","1.2-2")),t.xp6(3),t.Oqu(t.gM2(11,9,i.cobertura_global,"USD","$","1.2-2"))}}function I(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"h2"),t._uU(3,"Editar Cupon"),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,k,2,1,"button",5),t.TgZ(6,"button",6),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onEditDiscount())}),t._uU(7," Editar Cupon "),t.qZA()()(),t._UZ(8,"hr"),t.TgZ(9,"div",7)(10,"div",8)(11,"span"),t._uU(12,"Tipo de Descuento"),t.qZA()(),t._UZ(13,"switch-descuento",9),t.qZA(),t.TgZ(14,"div",7)(15,"div",8)(16,"span"),t._uU(17,"Valor"),t.qZA()(),t._UZ(18,"input",10),t.qZA(),t.TgZ(19,"div",11)(20,"div",7)(21,"div",8)(22,"span"),t._uU(23,"Fecha inicial"),t.qZA()(),t._UZ(24,"input-date",12),t.qZA(),t.TgZ(25,"div",7)(26,"div",8)(27,"span"),t._uU(28,"Fecha final"),t.qZA()(),t._UZ(29,"input-date",12),t.qZA(),t.TgZ(30,"div",7)(31,"div",8)(32,"span"),t._uU(33,"Servivios"),t.qZA()(),t.TgZ(34,"div",13)(35,"div",14)(36,"div",15)(37,"div",16),t._UZ(38,"img",17),t.TgZ(39,"span"),t._uU(40,"Espere un momento, cargando la informacion"),t.qZA()(),t.TgZ(41,"table")(42,"thead")(43,"tr")(44,"th",18),t._uU(45,"Nombre"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"costo"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"cobertura"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,A,12,14,"tr",19),t.qZA()()()()()()()()}if(2&n){const i=t.oxw();t.xp6(5),t.Q6J("ngIf",i.list_cupones),t.xp6(8),t.Q6J("typeDesc",i.tipo_valor),t.xp6(5),t.Q6J("formControl",i.valor),t.xp6(6),t.Q6J("dateControl",i.fecha_desde),t.xp6(5),t.Q6J("dateControl",i.fecha_hasta),t.xp6(7),t.ekj("info",i.hasLoaded),t.xp6(1),t.Q6J("@loadingAnimation",i.hasLoaded?"hide":"show"),t.xp6(4),t.Q6J("@loadingAnimation",i.hasLoaded?"show":"hide"),t.xp6(10),t.Q6J("ngForOf",i.list_servicios)}}let S=(()=>{var n;class a{constructor(){this.cuponesService=(0,t.f3M)(h.pl),this.serviciosService=(0,t.f3M)(h.Co),this.notificacionesModalService=(0,t.f3M)(v.g),this.router=(0,t.f3M)(f.gz),this.hasLoaded=!1,this.list_servicios=[],this.list_cupones=[],this.editCuponForm=null,this.servicio_id=null,this.oficina_id=null,this.tipo_valor=null,this.nombre=null,this.valor=null,this.fecha_desde=null,this.fecha_hasta=null,this.status=null}ngOnInit(){this.hasLoaded=!1,this.router.params.subscribe({next:e=>{this.mapData(e)},error:()=>{},complete:()=>{}})}mapData(e){const o=new u.x,c=o.asObservable();this.onLoading(c),this.serviciosService.getAll().pipe((0,_.w)(p=>(this.list_servicios=p.map(M=>({isSelected:!1,...M})),this.cuponesService.getOne(e.id)))).subscribe({next:p=>{o.complete(),this.list_cupones=p,this.list_servicios=this.list_servicios.map(M=>{const{isSelected:Y,...T}=M;return p[0].servicio_id===T.servicio_id?{isSelected:!0,...T}:M})},error:p=>{o.complete(),this.onError(p)},complete:()=>{this.mapToForm(),this.hasLoaded=!0}})}mapToForm(){console.log(this.list_cupones[0]),this.servicio_id=new s.NI(this.list_cupones[0].servicio_id,s.kI.required),this.oficina_id=new s.NI(null,s.kI.required),this.tipo_valor=new s.NI(this.list_cupones[0].tipo_valor,s.kI.required),this.nombre=new s.NI(this.list_cupones[0].nombre,s.kI.required),this.valor=new s.NI(this.list_cupones[0].valor,s.kI.required),this.fecha_desde=new s.NI(this.list_cupones[0].fecha_desde.split("T")[0].split("-").reverse().join("-"),s.kI.required),this.fecha_hasta=new s.NI(this.list_cupones[0].fecha_hasta.split("T")[0].split("-").reverse().join("-"),s.kI.required),this.editCuponForm=new s.cw({servicio_id:this.servicio_id,oficina_id:this.oficina_id,tipo_valor:this.tipo_valor,nombre:this.nombre,valor:this.valor,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta})}onEditDiscount(){const e=this.editCuponForm?.value,o=new u.x,c=o.asObservable();this.onLoading(c),this.cuponesService.update(this.list_cupones[0].cupon_id,e).subscribe({next:p=>{o.complete(),this.onSuccess("Cupon Actualizado")},error:p=>{o.complete(),this.onError(p)},complete:()=>{}})}onUpdateState(e){const o=new u.x,c=o.asObservable();this.onLoading(c),this.cuponesService.update(this.list_cupones[0].cupon_id,{status:e,valor:this.list_cupones[0].valor}).subscribe({next:M=>{o.complete(),this.onSuccess("Cupon Actualizado Correctamente")},error:M=>{o.complete(),this.onError(M)},complete:()=>{}})}onSuccess(e){this.notificacionesModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionesModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionesModalService.show("Cargando",{size:d.$u.normal,positions:[d.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}selectItem(e){this.uncheckServices(),e.selectedItem=!e.selectedItem}uncheckServices(){this.list_servicios.forEach(e=>e.isSelected=!1)}oneAtLeast(){return this.list_servicios.some(e=>!0===e.isSelected)}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:1,consts:[[1,"container"],["class","list",4,"ngIf"],[1,"list"],[1,"top"],[1,"buttons"],[3,"click",4,"ngIf"],[1,"emitir",3,"click"],[1,"field"],[1,"title"],[2,"margin-top","10px",3,"typeDesc"],["type","text","name","valor",3,"formControl"],[1,"row"],[3,"dateControl"],[1,"servicios-data"],[1,"table-container"],[1,"table-data"],[1,"loading"],["src","assets/svg/loading.svg","alt",""],[1,"f-start"],[4,"ngFor","ngForOf"],[3,"click"],[1,"f-start",3,"click"],[1,"item"],["type","checkbox",1,"checkbox",3,"checked"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,I,52,10,"form",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.editCuponForm))},dependencies:[r.sg,r.O5,b.K,s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,y,r.H9],styles:[".container[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - var(--main-header-height));flex-direction:column;padding:10px 20px;overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:25px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gray;border-radius:25px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:gray}.top[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}.top[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}hr[_ngcontent-%COMP%]{margin:10px;width:100%;border:1px solid gainsboro}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;border:none;border-radius:10px;border:1px solid var(--main-color);background-color:#f04b46;color:#fff;cursor:pointer}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.info[_ngcontent-%COMP%]{padding:0;display:grid;width:100%;grid-template-columns:1fr 1fr}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:10px;width:90%;font-size:14px;padding:10px 20px;border-radius:4px;border:1px solid gray;outline:none}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid gray}.bottom[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.button-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}button[_ngcontent-%COMP%]{border:none;font-size:16px;border-radius:8px;background-color:#f04b46;padding:10px 20px;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}.table-data[_ngcontent-%COMP%]{width:100%;height:500px;overflow:auto;border-radius:2px;border:1px solid #ccc;text-align:center;display:flex;align-items:center;justify-content:center;transition:all .3s ease-in-out;position:relative}.table-data.info[_ngcontent-%COMP%]{display:block}.table-data[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:10px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.table-selector[_ngcontent-%COMP%]{width:100%;height:70px;overflow:auto;display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;margin-top:10px}table[_ngcontent-%COMP%]{border-spacing:0px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid var(--border-color)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ccc;border:1px solid var(--border-color);cursor:pointer}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid black}table[_ngcontent-%COMP%]{width:100%}thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:var(--body-bg)}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:small;text-align:start;padding-left:20px;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:start;font-size:small;padding-left:20px}td.link[_ngcontent-%COMP%]{color:var(--main-color);text-decoration:none;cursor:pointer}td.link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--main-color);font-size:15px;font-weight:700}.servicios-data[_ngcontent-%COMP%]{width:100%}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;width:100%}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;font-size:14px;padding:10px;border-radius:4px;border:1px solid gray;outline:none;margin:20px}@media (max-width : 1024px){.container[_ngcontent-%COMP%]{width:100%;height:80vh;overflow-y:auto;overflow-x:hidden;padding-top:30px;padding-bottom:70px}.top[_ngcontent-%COMP%]{flex-direction:column}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.field[_ngcontent-%COMP%]{flex-direction:column;width:100%}.info[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],data:{animation:[C.g]}}),a})();var U=l(9315),Z=l(51468),P=l(86825);const q=(0,P.X$)("fadeInOut",[(0,P.SB)("void",(0,P.oB)({opacity:0})),(0,P.eR)(":enter, :leave",[(0,P.jt)("1s",(0,P.oB)({opacity:1}))])]);function D(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",4)(1,"span"),t._uU(2),t.qZA()()),2&n){const i=t.oxw();t.xp6(2),t.Oqu(i.message)}}let z=(()=>{var n;class a{constructor(){this.message="",this.duration=0,this.show=!1}showPopup(){this.show=!0,setTimeout(()=>{this.hidePopup()},this.duration)}hidePopup(){this.show=!1}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-popup"]],inputs:{message:"message",duration:"duration"},decls:5,vars:3,consts:[[1,"hover-container",3,"mouseenter","click","mouseleave"],["xmlns","http://www.w3.org/2000/svg","height","40","viewBox","0 96 960 960","width","40"],["d","M482 811.333q17.667 0 29.833-12.166Q524 787 524 769.333q0-17.666-12.167-29.833-12.166-12.166-29.833-12.166-17.666 0-29.833 12.166Q440 751.667 440 769.333q0 17.667 12.167 29.834 12.167 12.166 29.833 12.166Zm-35.333-148.666h64q0-28.334 6.833-49 6.833-20.667 41.166-50.334 29.334-26 43.001-50.5 13.666-24.5 13.666-55.5 0-53.999-36.666-85.333-36.667-31.333-93.334-31.333-51.666 0-88.5 26.333Q360 393.333 344 436l57.333 22q9-24.667 29.5-42t52.5-17.333q33.334 0 52.667 18.166 19.334 18.167 19.334 44.5 0 21.334-12.667 40.167-12.667 18.833-35.334 37.834-34.666 30.333-47.666 53.999-13 23.667-13 69.334ZM480 976q-82.333 0-155.333-31.5t-127.334-85.833Q143 804.333 111.5 731.333T80 576q0-83 31.5-156t85.833-127q54.334-54 127.334-85.5T480 176q83 0 156 31.5T763 293q54 54 85.5 127T880 576q0 82.333-31.5 155.333T763 858.667Q709 913 636 944.5T480 976Z"],["class","hover-content",4,"ngIf"],[1,"hover-content"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.NdJ("mouseenter",function(){return o.showPopup()})("click",function(){return o.showPopup()})("mouseleave",function(){return o.hidePopup()}),t.TgZ(1,"button"),t.O4$(),t.TgZ(2,"svg",1),t._UZ(3,"path",2),t.qZA()(),t.YNc(4,D,3,1,"div",3),t.qZA()),2&e&&(t.xp6(1),t.ekj("show",o.show),t.xp6(3),t.Q6J("ngIf",o.show))},dependencies:[r.O5],styles:['.hover-container[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:3}button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;fill:var(--main-color);transition:all .3s ease-in-out}button.show[_ngcontent-%COMP%]{scale:1.1;rotate:10deg}.hover-content[_ngcontent-%COMP%]{position:absolute;width:200px;top:-100%;left:50%;transform:translate(-50%);background-color:#fff;padding:10px;border:1px solid #ccc;visibility:hidden;opacity:0;transition:visibility 0s linear 2s,opacity .2s;z-index:4;border-radius:10px}.hover-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-align:center;display:flex;align-items:center;justify-content:center}.hover-content[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#ccc transparent transparent transparent}.hover-container[_ngcontent-%COMP%]:hover   .hover-content[_ngcontent-%COMP%]{visibility:visible;opacity:1;top:-140%}'],data:{animation:[q]}}),a})();function J(n,a){if(1&n&&(t.TgZ(0,"div",19),t._UZ(1,"app-popup",20),t.qZA()),2&n){const i=t.oxw(2);t.xp6(1),t.Q6J("@loadingAnimation",i.hasLoaded?"show":"hide")("message","Solamente puedes seleccionar un servicio")("duration",3e3)}}function L(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",21),t.NdJ("click",function(){const c=t.CHM(i).$implicit,p=t.oxw(2);return t.KtG(p.selectItem(c))}),t._UZ(2,"input",22),t.qZA(),t.TgZ(3,"td")(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA()()}if(2&n){const i=a.$implicit;t.xp6(2),t.Q6J("checked",i.isSelected),t.xp6(3),t.Oqu(i.servicio),t.xp6(2),t.Oqu(t.gM2(8,4,i.precio_base,"USD","$","1.2-2")),t.xp6(3),t.Oqu(t.gM2(11,9,i.cobertura_global,"USD","$","1.2-2"))}}function j(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"h2"),t._uU(3,"Crear Cupon"),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.createCupon())}),t._uU(5," Crear Cupon "),t.qZA()(),t._UZ(6,"hr"),t.TgZ(7,"div",5)(8,"div",6)(9,"span"),t._uU(10,"Tipo de Cupon"),t.qZA()(),t._UZ(11,"switch-descuento",7),t.qZA(),t.TgZ(12,"div",5)(13,"div",6)(14,"span"),t._uU(15,"Nombre"),t.qZA()(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"div",5)(18,"div",6)(19,"span"),t._uU(20,"Valor"),t.qZA()(),t._UZ(21,"input",9),t.qZA(),t.TgZ(22,"div",10)(23,"div",5)(24,"div",6)(25,"span"),t._uU(26,"Fecha inicial"),t.qZA()(),t._UZ(27,"input-date",11),t.qZA(),t.TgZ(28,"div",5)(29,"div",6)(30,"span"),t._uU(31,"Fecha final"),t.qZA()(),t._UZ(32,"input-date",11),t.qZA()(),t.TgZ(33,"div",5)(34,"div",6)(35,"span"),t._uU(36,"Servivios"),t.qZA()(),t.TgZ(37,"div",12),t.YNc(38,J,2,3,"div",13),t.TgZ(39,"div",14)(40,"div",15)(41,"div",16),t._UZ(42,"img",17),t.TgZ(43,"span"),t._uU(44,"Espere un momento, cargando la informacion"),t.qZA()(),t.TgZ(45,"table")(46,"thead")(47,"tr")(48,"th"),t._uU(49,"Estado"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Nombre"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"costo"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"cobertura"),t.qZA()()(),t.TgZ(56,"tbody"),t.YNc(57,L,12,14,"tr",18),t.qZA()()()()()()()}if(2&n){const i=t.oxw();t.Q6J("formGroup",i.createCuponForm),t.xp6(11),t.Q6J("typeDesc",i.tipo_valor),t.xp6(16),t.Q6J("dateControl",i.fecha_desde),t.xp6(5),t.Q6J("dateControl",i.fecha_hasta),t.xp6(6),t.Q6J("ngIf",i.hasLoaded),t.xp6(2),t.ekj("info",i.hasLoaded),t.xp6(1),t.Q6J("@loadingAnimation",i.hasLoaded?"hide":"show"),t.xp6(4),t.Q6J("@loadingAnimation",i.hasLoaded?"show":"hide"),t.xp6(12),t.Q6J("ngForOf",i.list_servicios)}}const N=[{path:"cupones",component:m,children:[{path:"create",component:(()=>{var n;class a{constructor(){this.hasLoaded=!0,this.list_servicios=null,this.createCuponForm=null,this.oficina_id=new s.NI("[1,2,3]",s.kI.required),this.tipo_valor=new s.NI(null,s.kI.required),this.nombre=new s.NI(null,s.kI.required),this.valor=new s.NI(null,s.kI.required),this.fecha_desde=new s.NI(null,s.kI.required),this.fecha_hasta=new s.NI(null,s.kI.required),this.status=new s.NI(null,s.kI.required),this.cuponesService=(0,t.f3M)(h.pl),this.serviciosService=(0,t.f3M)(h.Co),this.notificacionesModalService=(0,t.f3M)(v.g)}ngOnInit(){this.hasLoaded=!1;const e=new u.x,o=e.asObservable();this.onLoading(o),this.serviciosService.getAll().subscribe({next:c=>{this.list_servicios=c.map(p=>({isSelected:!1,...p}))},error:c=>{},complete:()=>{this.createCuponForm=new s.cw({oficina_id:this.oficina_id,tipo_valor:this.tipo_valor,nombre:this.nombre,valor:this.valor,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta,status:new s.NI(1,s.kI.required)}),e.complete(),e.unsubscribe(),this.hasLoaded=!0}})}selectItem(e){e.isSelected=!e.isSelected}uncheckServices(){this.list_servicios.forEach(e=>e.isSelected=!1)}oneAtLeast(){return this.list_servicios.some(e=>!0===e.isSelected)}onSuccess(e){this.notificacionesModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionesModalService.show(e,{size:d.$u.normal,duration:3e3,positions:[d.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionesModalService.show("Cargando",{size:d.$u.normal,positions:[d.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}createCupon(){if(this.oneAtLeast()){const e=[];this.list_servicios?.forEach(o=>{if(o.isSelected){const c=this.mapServToCupon(o,this.createCuponForm?.value);e.push(this.cuponesService.create(c))}}),this.callTheRequest(e)}}callTheRequest(e){const o=new u.x,c=o.asObservable();this.onLoading(c),(0,U.D)(e).subscribe({next:p=>{o.complete(),this.onSuccess("Cupon Creado exitosamente")},error:p=>{o.complete(),this.onError(p)},complete:()=>{o.complete()}})}mapServToCupon(e,o){return{servicio_id:e.servicio_id,oficina_id:o.oficina_id,tipo_valor:o.tipo_valor,nombre:o.nombre,valor:o.valor,fecha_hasta:Z.T.invert_date(this.fecha_hasta.value),fecha_desde:Z.T.invert_date(this.fecha_desde.value),status:1}}}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:1,consts:[[1,"container"],["class","list",3,"formGroup",4,"ngIf"],[1,"list",3,"formGroup"],[1,"top"],[1,"emitir",3,"click"],[1,"field"],[1,"title"],[2,"margin-top","10px",3,"typeDesc"],["type","text","name","nombre","formControlName","nombre"],["type","text","name","valor","formControlName","valor"],[1,"row"],[3,"dateControl"],[1,"servicios-data"],["class","information-container",4,"ngIf"],[1,"table-container"],[1,"table-data"],[1,"loading"],["src","assets/svg/loading.svg","alt",""],[4,"ngFor","ngForOf"],[1,"information-container"],[3,"message","duration"],[1,"f-start",2,"padding-left","20px",3,"click"],["type","checkbox",1,"checkbox",3,"checked"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,j,58,10,"form",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.createCuponForm))},dependencies:[r.sg,r.O5,z,b.K,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,y,r.H9],styles:[".container[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - var(--main-header-height));flex-direction:column;padding:10px 20px;overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:25px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gray;border-radius:25px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:gray}.top[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}.top[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}hr[_ngcontent-%COMP%]{margin:10px;width:100%;border:1px solid gainsboro}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;border:none;border-radius:10px;border:1px solid var(--main-color);background-color:#f04b46;color:#fff;cursor:pointer}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.info[_ngcontent-%COMP%]{padding:0;display:grid;width:100%;grid-template-columns:1fr 1fr}.field[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:10px;width:90%;font-size:14px;padding:10px 20px;border-radius:4px;border:1px solid gray;outline:none}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid gray}.bottom[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.button-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}button[_ngcontent-%COMP%]{border:none;font-size:16px;border-radius:8px;background-color:#f04b46;padding:10px 20px;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}.table-data[_ngcontent-%COMP%]{width:100%;height:500px;overflow:auto;border-radius:2px;border:1px solid #ccc;text-align:center;display:flex;align-items:center;justify-content:center;transition:all .3s ease-in-out;position:relative}.table-data.info[_ngcontent-%COMP%]{display:block}.table-data[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:10px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.table-selector[_ngcontent-%COMP%]{width:100%;height:70px;overflow:auto;display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;margin-top:10px}table[_ngcontent-%COMP%]{border-spacing:0px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid var(--border-color)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ccc;border:1px solid var(--border-color);cursor:pointer}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid black}table[_ngcontent-%COMP%]{width:100%}thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:var(--body-bg)}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:small;text-align:start;padding-left:20px;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:start;font-size:small;padding-left:20px}td.link[_ngcontent-%COMP%]{color:var(--main-color);text-decoration:none;cursor:pointer}td.link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--main-color);font-size:15px;font-weight:700}.servicios-data[_ngcontent-%COMP%]{width:100%}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;width:100%}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;font-size:14px;padding:10px;border-radius:4px;border:1px solid gray;outline:none;margin:20px}@media (max-width : 1024px){.container[_ngcontent-%COMP%]{width:100%;height:80vh;overflow-y:auto;overflow-x:hidden;padding-top:30px;padding-bottom:70px}.top[_ngcontent-%COMP%]{flex-direction:column}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.field[_ngcontent-%COMP%]{flex-direction:column;width:100%}.info[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],data:{animation:[C.g]}}),a})()},{path:":id",component:S}]}];let E=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(N),f.Bz]}),a})();var F=l(81837),Q=l(67582),V=l(91352);let $=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz,r.ez,F.m,Q.D,E,s.u5,s.UX,V.I]}),a})()},28633:(w,O,l)=>{l.d(O,{K:()=>v});var r=l(46689),f=l(51468),t=l(96814),u=l(56223);function h(g,x){if(1&g&&(r.TgZ(0,"div",5)(1,"span"),r._uU(2,"Edad"),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA()()),2&g){const m=r.oxw();r.xp6(4),r.Oqu(m.ages)}}function d(g,x){if(1&g&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&g){const m=r.oxw();r.xp6(1),r.AsE(" No esta en el rango de ",m.servicio.edad_base," - ",m.servicio.edad_limite," ")}}let v=(()=>{var g;class x{constructor(){this.date=null,this.ages=null,this.isNotValidDate=!1,this.onSetValidDate=new r.vpe,this.cdr=(0,r.f3M)(r.sBO),this.datesAction=new f.T}ngOnInit(){this.dateControl?.value&&(this.date=f.T.invert_date(this.dateControl.value)),this.ageControl?.value&&(this.date=f.T.invert_date(this.ageControl.value)),this.isActionValid()}onDeleteWrite(s){"Backspace"!==s.key&&((2===this.date?.length||5===this.date?.length)&&(this.date+="-",this.cdr.detectChanges()),this.isActionValid())}isActionValid(){if(10===this.date?.length){const s=this.date.split("-");if(this.arraymove(s,0,1),this.ages=this.datesAction.yearsBetweenDates(s.join("-"),this.travelDate),this.servicio)return this.ages>this.servicio.edad_limite||this.ages<this.servicio.edad_base?(this.isNotValidDate=!0,this.onSetValidDate.emit(null),this.dateControl?.setValue(null),void this.cdr.detectChanges()):(this.isNotValidDate=!1,this.ageControl?.setValue(this.datesAction.yearsBetweenDates(s.join("-"),this.travelDate)),this.onSetValidDate.emit(this.date),this.dateControl?.setValue(this.date),void this.cdr.detectChanges());this.onSetValidDate.emit(this.date),this.dateControl?.setValue(this.date)}}arraymove(s,_,C){var b=s[_];s.splice(_,1),s.splice(C,0,b)}}return(g=x).\u0275fac=function(s){return new(s||g)},g.\u0275cmp=r.Xpm({type:g,selectors:[["input-date"]],inputs:{dateControl:"dateControl",ageControl:"ageControl",travelDate:"travelDate",servicio:"servicio"},outputs:{onSetValidDate:"onSetValidDate"},decls:5,vars:5,consts:[[1,"input-date"],["type","text","placeholder","dd-mm-yyyy","autocomplete","false",3,"ngModel","ngModelChange","keyup"],[1,"details-input"],["class","age-detail",4,"ngIf"],[4,"ngIf"],[1,"age-detail"]],template:function(s,_){1&s&&(r.TgZ(0,"div",0)(1,"input",1),r.NdJ("ngModelChange",function(b){return _.date=b})("keyup",function(b){return _.onDeleteWrite(b)}),r.qZA(),r.TgZ(2,"div",2),r.YNc(3,h,5,1,"div",3),r.YNc(4,d,2,2,"span",4),r.qZA()()),2&s&&(r.xp6(1),r.Q6J("ngModel",_.date),r.xp6(1),r.ekj("error",_.isNotValidDate),r.xp6(1),r.Q6J("ngIf",_.ages),r.xp6(1),r.Q6J("ngIf",_.isNotValidDate))},dependencies:[t.O5,u.Fj,u.JJ,u.On],styles:["input[_ngcontent-%COMP%]{width:100%;outline:none;border:1px solid gainsboro;padding:10px 20px;color:var(--text-color);border-radius:8px}.details-input[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-date[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.details-input.error[_ngcontent-%COMP%]{color:red;font-weight:700}.age-detail[_ngcontent-%COMP%]{border:1px solid gainsboro;flex-direction:column;display:flex;width:-moz-fit-content;width:fit-content;margin:5px;padding:5px;border-radius:9px}"]}),x})()},51468:(w,O,l)=>{l.d(O,{T:()=>r});class r{quantityBetweenDates(t,u){const h=new Date(t),d=new Date(u),v=Math.abs(d.getTime()-h.getTime());return Math.ceil(v/864e5)+1}yearsBetweenDates(t,u){const h=new Date(u),d=new Date(t);var v=h.getFullYear(),g=h.getMonth(),x=h.getDate(),m=d.getFullYear(),s=d.getMonth(),_=d.getDate(),C=v-m;return(s>g||s==g&&_>x)&&C--,C}static invert_date(t){return t.split("-").reverse().join("-")}}}}]);