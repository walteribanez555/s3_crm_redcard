"use strict";(self.webpackChunkadminMonster=self.webpackChunkadminMonster||[]).push([[5],{68005:(N,y,g)=>{g.r(y),g.d(y,{ModificacionesModule:()=>pt});var f=g(96814),C=g(3057),t=g(46689);let A=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-layout-page"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[C.lC],styles:["[_nghost-%COMP%]{display:block}"]}),s})();var c=g(56223),O=g(30043),h=g(78645),v=g(94664),M=g(91011),k=g(7110),T=g(11902),u=g(51215),Z=g(23707),x=g(20355);function l(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.makeCsvVen())}),t._UZ(1,"i",10),t.TgZ(2,"span"),t._uU(3,"Exportar"),t.qZA()()}}const d=function(o){return{poliza_id:o}};function p(o,s){if(1&o&&(t.TgZ(0,"tr",11)(1,"td")(2,"span",12),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"currency"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"currency"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"currency"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"currency"),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA()()),2&o){const i=s.$implicit,e=t.oxw();t.Q6J("routerLink","../"+i.venta_id)("queryParams",t.VKq(29,d,i.poliza_id)),t.xp6(2),t.Q6J("ngClass",e.getStatusClass(i.status)),t.xp6(1),t.Oqu(1==i.status?"Proceso":2==i.status?"Realizada":"Cancelada"),t.xp6(2),t.Oqu(i.fecha_venta.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(i.fecha_salida.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(i.fecha_retorno.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(e.getOficces(i.office_id)[0]),t.xp6(2),t.hij(" ",i.username," "),t.xp6(2),t.hij(" ",i.poliza_id," "),t.xp6(2),t.hij(" ",e.getService(i.servicio_id)," "),t.xp6(2),t.hij(" ",i.primer_nombre," "),t.xp6(2),t.hij(" ",i.primer_apellido," "),t.xp6(2),t.hij(" ",t.lcZ(24,21,i.precio)," "),t.xp6(3),t.Oqu(t.lcZ(27,23,e.getPriceByItem(i.plus,i.cantidad))),t.xp6(3),t.Oqu(t.lcZ(30,25,e.getPriceByItem(i.descuento,i.cantidad))),t.xp6(3),t.Oqu(t.lcZ(33,27,e.getPriceByItem(i.total_pago,i.cantidad))),t.xp6(3),t.Oqu(i.edad),t.xp6(2),t.Oqu(i.origen),t.xp6(2),t.Oqu(i.destino),t.xp6(2),t.Oqu(i.email)}}let _=(()=>{var o;class s{constructor(){this.route=(0,t.f3M)(C.gz),this.reportesService=(0,t.f3M)(T.c),this.officeService=(0,t.f3M)(k.a),this.serviciosService=(0,t.f3M)(M.Co),this.ventas=[],this.servicios=[],this.oficina=[],this.filterForm=new c.cw({initialDate:new c.NI(null,[c.kI.required]),finalDate:new c.NI(null,[c.kI.required])}),this.notificacionModalService=(0,t.f3M)(Z.g),this.isWithFilter=!1}ngOnInit(){const e=new h.x,n=e.asObservable();this.serviciosService.getAll().pipe((0,v.w)(r=>(this.servicios=r,this.officeService.getAll()))).subscribe({next:r=>{this.oficina=r},error:r=>{e.complete(),this.onError(r)},complete:()=>{this.route.queryParams.subscribe(r=>{this.ventas=[];const{init:a,end:m}=this.route.snapshot.queryParams;a&&m?this.fetchReport(a,m,n,e):this.isWithFilter=!0})}})}fetchReport(e,n,r,a){this.onLoading(r),this.reportesService.get(e,n).subscribe({next:m=>{a.complete(),this.ventas=m},error:m=>{a.complete(),this.onError(m)}})}onFilter(e){const n=new h.x,r=n.asObservable();this.fetchReport(e[0],e[1],r,n)}getPriceByItem(e,n){return"string"==typeof e?parseInt(e)/parseInt(n):e/parseInt(n)}getOficces(e){console.log({office_id:e}),console.log(this.oficina);const n=this.oficina.filter(r=>r.office_id==e).map(r=>r.office_name);return console.log({oficcess:n}),n}getService(e){return this.servicios.filter(n=>n.servicio_id==e).map(n=>n.servicio)}getStatusClass(e){return{success:2===e,deleted:3===e}}getStatusString(e){return 1==e?"realizado":"proceso"}getStatusPoliza(e){return"Activa"}makeCsvVen(){const e="reporte ventas-"+(new Date).toISOString().split("T")[0],r=this.ventas.map(a=>({venta:a.venta_id,status:this.getStatusString(a.status),oficina:this.getOficces(a.office_id),username:a.username,"fecha venta":a.fecha_venta.split("T")[0],"forma pago":"efectivo",cantidad:a.cantidad,precio:parseFloat(a.precio),total:parseFloat(a.total),plus:a.plus,descuento:parseFloat(a.descuento),"descuento extra":a.descuento_extra,"total pagado":a.total_pago,poliza:a.poliza_id,"status poliza":this.getStatusPoliza(a.poliza_st),destino:a.destino,dias:a.nro_dias,"fecha salida":a.fecha_salida.split("T")[0],"fecha retorno":a.fecha_retorno.split("T")[0],beneficiario:a.beneficiario_id,nombres:a.primer_nombre,apellidos:a.primer_apellido,identificacion:a.nro_identificacion,"fecha nacimiento":a.fecha_nacimiento.split("T")[0],edad:a.edad,origen:a.origen,email:a.email,telefono:a.telefono}));new O.J0(r,e,{fieldSeparator:";",quoteStrings:'"',decimalseparator:"locale",showLabels:!0,showTitle:!0,title:"Report data",useBom:!0,headers:["venta","status","Oficina","username","fecha venta","forma pago","cantidad","precio","total","plus","descuento","descuento extra","total_pago","poliza","status poliza","destino","dias","fecha salida","fecha retorno","beneficiario","nombres","apellidos","identificacion","fecha nacimiento","edad","origen","email","telefono"]})}onSuccess(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionModalService.show("Cargando",{size:u.$u.normal,positions:[u.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:51,vars:2,consts:[[1,"container"],[1,"top"],[1,"title"],[2,"width","100%",3,"onFilter"],[2,"width","100%"],["class","export",3,"click",4,"ngIf"],[1,"info"],[1,"table-data","info"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"export",3,"click"],[1,"fa-solid","fa-file-csv"],[3,"routerLink","queryParams"],[1,"status",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),t._uU(4,"Listado de Polizas"),t.qZA()()(),t.TgZ(5,"filter",3),t.NdJ("onFilter",function(a){return n.onFilter(a)}),t.qZA(),t._UZ(6,"hr",4),t.YNc(7,l,4,0,"button",5),t.TgZ(8,"div",6)(9,"div",7)(10,"table")(11,"thead")(12,"tr")(13,"th"),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"fecha venta"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"fecha salida"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"fecha retorno"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Oficina"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Usuario"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Poliza"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Plan"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Nombres"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Apellidos"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Precio"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Plus"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Descuento"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Total"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Edad"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Origen"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Destino"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Email"),t.qZA()()(),t.TgZ(49,"tbody"),t.YNc(50,p,42,31,"tr",8),t.qZA()()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.ventas.length>0),t.xp6(43),t.Q6J("ngForOf",n.ventas))},dependencies:[C.rH,f.mk,f.sg,f.O5,x.z,f.H9],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:40px;width:100%;height:calc(100vh - 80px);overflow-y:auto}.top[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.title[_ngcontent-%COMP%]{display:flex;align-items:center}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:600;text-align:start;padding-left:20px}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background:none;border:3px solid var(--main-color);border-radius:10px;padding:10px 20px;color:var(--main-color);font-size:15px;transition:.3s all ease-in-out}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:.3s all ease-in-out;padding-left:5px}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transition:.3s all ease-in-out;padding-left:20px}hr[_ngcontent-%COMP%]{margin:20px 0;width:100%;border:1px solid gainsboro}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:20px;width:100%}.table-container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:10px}.table-data[_ngcontent-%COMP%]{width:100%;height:500px;overflow:auto;border-radius:2px;border:1px solid #ccc}.table-data[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info[_ngcontent-%COMP%]{padding:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid black}table[_ngcontent-%COMP%]{width:120%}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;flex-wrap:wrap;gap:10px;width:30%}.row[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-end;justify-content:flex-end}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 20px;font-size:12px;outline:none;border-radius:8px;border:1px solid gainsboro;color:var(--text-color);height:100%}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:12px;border-radius:8px;border:none;color:#fff;cursor:pointer;transition:.3s ease-in-out}button.export[_ngcontent-%COMP%]{background-color:var(--body-bg);color:green;border:1px solid green;font-weight:700;transition:all .3s ease-in-out;margin:10px}button.export[_ngcontent-%COMP%]:hover{background-color:green;color:#fff;transition:all .3s ease-in-out}button.export[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.filters[_ngcontent-%COMP%]   button.valid[_ngcontent-%COMP%]{transition:.3s ease-in-out;background-color:#f04b46}.status[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid var(--main-color);color:var(--main-color);font-weight:700;border-radius:8px}.status.success[_ngcontent-%COMP%]{border:1px solid green;color:green}thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:var(--body-bg)}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:small;text-align:center;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-size:small}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.vigente[_ngcontent-%COMP%]{color:green;border:1px solid green;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.congelada[_ngcontent-%COMP%]{color:gray;border:1px solid gray;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.uso[_ngcontent-%COMP%]{color:var(--main-color);border:1px solid var(--main-color);padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.anulada[_ngcontent-%COMP%]{color:#ff4500;border:1px solid orangered;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--main-color);font-weight:700}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--main-color);border-radius:6px}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}@media (max-width: 1024px){.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 10px}.container[_ngcontent-%COMP%]{height:calc(100vh - (80px + 10vh))}button.export[_ngcontent-%COMP%]{width:100%;margin:10px 0}}"]}),s})();var b=g(52642),z=g(2025),q=g(28633);function U(o,s){if(1&o&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&o){const i=s.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}let P=(()=>{var o;class s{constructor(){this.cdr=(0,t.f3M)(t.sBO),this.destinies=b.x.map(e=>e.country.toLocaleUpperCase()),this.closeEvent=new t.vpe,this.submitEvent=new t.vpe,this.elementRef=(0,t.f3M)(t.SBq)}ngOnInit(){this.beneficiarioForm=new c.cw({primer_nombre:new c.NI(this.beneficiario.primer_nombre,[c.kI.required]),primer_apellido:new c.NI(this.beneficiario.primer_apellido,[c.kI.required]),fecha_nacimiento:new c.NI(this.beneficiario.fecha_nacimiento,[c.kI.required]),sexo:new c.NI(this.beneficiario.sexo,[c.kI.required]),origen:new c.NI(this.beneficiario.origen,[c.kI.required]),email:new c.NI(this.beneficiario.email,[c.kI.required]),telefono:new c.NI(this.beneficiario.telefono,[c.kI.required]),nro_identificacion:new c.NI(this.beneficiario.nro_identificacion,[c.kI.required])}),this.sexoFormControl=this.beneficiarioForm.get("sexo"),this.ageFormControl=this.beneficiarioForm.get("fecha_nacimiento"),this.cdr.detectChanges()}close(){this.elementRef.nativeElement.remove()}submit(){this.elementRef.nativeElement.remove(),this.submitEvent.emit(this.beneficiarioForm?.value)}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],inputs:{beneficiario:"beneficiario",travelDate:"travelDate",servicio:"servicio"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent"},decls:44,vars:7,consts:[[1,"modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-content",3,"formGroup","submit"],[1,"field"],["type","text","name","primer_nombre","formControlName","primer_nombre"],["type","text","name","primer_apellido","formControlName","primer_apellido"],["type","text","formControlName","nro_identificacion","name","nro_identificacion"],[3,"ageControl","dateControl","travelDate","servicio"],[3,"genderControl"],["formControlName","origen","name","origen"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","email","name","email"],["type","text","formControlName","telefono","name","telefono"],[1,"actions"],["type","submit"],[1,"modal-backdrop",3,"click"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Editar detalles del Beneficiario"),t.qZA(),t.TgZ(4,"span",2),t.NdJ("click",function(){return n.close()}),t._uU(5,"X"),t.qZA()(),t.TgZ(6,"form",3),t.NdJ("submit",function(){return n.submit()}),t.TgZ(7,"div",4)(8,"span"),t._uU(9,"Nombre(s)"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"div",4)(12,"span"),t._uU(13,"Apellido(s)"),t.qZA(),t._UZ(14,"input",6),t.qZA(),t.TgZ(15,"div",4)(16,"span"),t._uU(17,"Nro Identificacion"),t.qZA(),t._UZ(18,"input",7),t.qZA(),t.TgZ(19,"div",4)(20,"span"),t._uU(21,"Fecha Nacimiento"),t.qZA(),t._UZ(22,"input-date",8),t.qZA(),t.TgZ(23,"div",4)(24,"span"),t._uU(25,"Sexo"),t.qZA(),t._UZ(26,"gender-input",9),t.qZA(),t.TgZ(27,"div",4)(28,"span"),t._uU(29,"Origen"),t.qZA(),t.TgZ(30,"select",10),t.YNc(31,U,2,2,"option",11),t.qZA()(),t.TgZ(32,"div",4)(33,"span"),t._uU(34,"Email"),t.qZA(),t._UZ(35,"input",12),t.qZA(),t.TgZ(36,"div",4)(37,"span"),t._uU(38,"telefono"),t.qZA(),t._UZ(39,"input",13),t.qZA(),t.TgZ(40,"div",14)(41,"button",15),t._uU(42," Modificar "),t.qZA()()()(),t.TgZ(43,"div",16),t.NdJ("click",function(){return n.close()}),t.qZA()),2&e&&(t.xp6(6),t.Q6J("formGroup",n.beneficiarioForm),t.xp6(16),t.Q6J("ageControl",n.ageFormControl)("dateControl",n.ageFormControl)("travelDate",n.travelDate)("servicio",n.servicio),t.xp6(4),t.Q6J("genderControl",n.sexoFormControl),t.xp6(5),t.Q6J("ngForOf",n.destinies))},dependencies:[f.sg,z.D,q.K,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u],styles:["@keyframes _ngcontent-%COMP%_displayBackground{0%{background-color:#0000001a}to{background-color:#0006}}.modal-backdrop[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#0006;position:absolute;inset:0;z-index:24;display:flex;justify-content:center;align-items:center;animation-name:_ngcontent-%COMP%_displayBackground;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}@keyframes _ngcontent-%COMP%_expandModal{0%{top:40%;opacity:0}to{top:50%;opacity:1}}.modal[_ngcontent-%COMP%]{width:800px;height:950px;margin:0 auto;display:table;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);z-index:25;background-color:#fff;border-radius:5px;transition:all .5s ease-in-out;display:flex;flex-direction:column;overflow:hidden;align-items:center;justify-content:space-between}@media (min-width: 768px){.modal[_ngcontent-%COMP%]{animation-name:expandModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}}.modal-close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:10px;top:10px;transition:all .3s ease-in-out}.modal-close[_ngcontent-%COMP%]:hover{scale:1.05;transition:all .3s ease-in-out}.modal-header[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:var(--main-color);position:relative;color:#fff;font-weight:700;display:flex;align-items:center;justify-content:space-between;height:10vh}.modal-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:30px;object-fit:fill}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;margin-left:20px;font-weight:700}.loading-container[_ngcontent-%COMP%]{color:var(--main-color);font-size:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center;gap:20px;padding:20px;overflow-y:auto}.info[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{padding:10px 20px}.info[_ngcontent-%COMP%]{overflow-y:auto}hr[_ngcontent-%COMP%]{border:1px solid var(--text-color);margin:10px 0}.title[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{border:none;width:100%;padding:10px 20px;background-color:#f04b46;color:#fff;border-radius:5px;cursor:pointer;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border:1px solid gainsboro;outline:none;color:var(--text-color)}.field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}span.close-btn[_ngcontent-%COMP%]{cursor:pointer}.info[_ngcontent-%COMP%]::-webkit-scrollbar{width:1em;height:1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efedf7;border-radius:100vw;margin-block:.1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gainsboro;border-radius:10px}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:grey;border-radius:10px}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:40%}.actions[_ngcontent-%COMP%]{width:100%;padding:20px}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:20px;color:#fff;font-weight:700;cursor:pointer;border-radius:8px;background-color:#f04b46}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}@keyframes _ngcontent-%COMP%_displayModal{0%{top:90%}to{top:0%}}@media (max-height:750px){.modal[_ngcontent-%COMP%]{height:80vh}}@media (max-width:1024px){.modal-backdrop[_ngcontent-%COMP%]{height:90vh}.modal[_ngcontent-%COMP%]{top:0vh;left:0;bottom:0;width:100%;height:100vh;overflow-y:auto;transform:none;animation-name:_ngcontent-%COMP%_displayModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.modal-header[_ngcontent-%COMP%]{justify-content:space-between;height:10vh}.modal-content[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:column;width:100%;height:100%;align-items:flex-start;padding:100px 20px}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]{width:100%}.modal-header[_ngcontent-%COMP%]   span.close-btn[_ngcontent-%COMP%]{font-size:20px}}"]}),s})(),w=(()=>{var o;class s{constructor(e){this.document=e,this.resolver=(0,t.f3M)(t._Vd),this.injector=(0,t.f3M)(t.zs3)}open(e){const r=this.resolver.resolveComponentFactory(P).create(this.injector,[]);return r.instance.closeEvent.subscribe(()=>this.closeModal()),r.instance.submitEvent.subscribe(a=>{this.submitModal(a)}),r.instance.beneficiario=e.beneficiario,r.instance.servicio=e.servicio,r.instance.travelDate=e.travelDate,r.hostView.detectChanges(),this.document.body.appendChild(r.location.nativeElement),this.modalNotifier=new h.x,this.modalNotifier?.asObservable()}closeModal(){this.modalNotifier?.complete()}submitModal(e){this.modalNotifier?.next(e),this.closeModal()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.LFG(f.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var S=g(56585);function j(o,s){if(1&o&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&o){const i=s.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}let J=(()=>{var o;class s{constructor(){this.cdr=(0,t.f3M)(t.sBO),this.sessionService=(0,t.f3M)(S.m),this.closeEvent=new t.vpe,this.submitEvent=new t.vpe,this.destinies=b.x.map(e=>e.country.toLocaleUpperCase()),this.elementRef=(0,t.f3M)(t.SBq)}ngOnInit(){this.formPoliza=new c.cw({fecha_salida:new c.NI(this.poliza.fecha_salida,[c.kI.required]),fecha_retorno:new c.NI(this.poliza.fecha_retorno,[c.kI.required]),dias:new c.NI(this.poliza.nro_dias,[c.kI.required]),destino:new c.NI(this.poliza.destino,[c.kI.required]),observaciones:new c.NI(null,[c.kI.required]),username:new c.NI(this.sessionService.getUser(),[c.kI.required]),fecha_caducidad:new c.NI(this.poliza.fecha_caducidad.split("T")[0],[c.kI.required])}),this.cdr.detectChanges()}getDifference(){const e=this.formPoliza?.get("fecha_salida")?.value,n=this.formPoliza?.get("fecha_retorno")?.value,r=new Date(e),m=new Date(n).getTime()-r.getTime(),gt=Math.floor(m/864e5);this.formPoliza?.get("dias")?.setValue(gt+1),this.cdr.detectChanges()}close(){this.elementRef.nativeElement.remove()}submit(){this.elementRef.nativeElement.remove(),this.submitEvent.emit(this.formPoliza?.value)}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],inputs:{poliza:"poliza"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent"},decls:32,vars:4,consts:[[1,"modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-content",3,"formGroup","ngSubmit"],[1,"field"],[1,"f-title"],["type","date","formControlName","fecha_salida","name","fecha_salida",3,"change"],["type","date","formControlName","fecha_retorno","name","fecha_retorno",3,"change"],["formControlName","destino","name","destino"],[3,"value",4,"ngFor","ngForOf"],["type","text",3,"value","disabled"],[1,"field",2,"width","100%"],["type","text","formControlName","observaciones","name","observaciones"],[1,"actions"],["type","submit"],[1,"modal-backdrop",3,"click"],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Editar detalles de la Poliza"),t.qZA(),t.TgZ(4,"span",2),t.NdJ("click",function(){return n.close()}),t._uU(5,"X"),t.qZA()(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(7,"div",4)(8,"span",5),t._uU(9,"Fecha Salida"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("change",function(){return n.getDifference()}),t.qZA()(),t.TgZ(11,"div",4)(12,"span",5),t._uU(13,"Fecha Retorno"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("change",function(){return n.getDifference()}),t.qZA()(),t.TgZ(15,"div",4)(16,"span"),t._uU(17,"Destino"),t.qZA(),t.TgZ(18,"select",8),t.YNc(19,j,2,2,"option",9),t.qZA()(),t.TgZ(20,"div",4)(21,"span",5),t._uU(22,"Dias"),t.qZA(),t._UZ(23,"input",10),t.qZA(),t.TgZ(24,"div",11)(25,"span",5),t._uU(26,"Observacion"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"div",13)(29,"button",14),t._uU(30," Modificar "),t.qZA()()()(),t.TgZ(31,"div",15),t.NdJ("click",function(){return n.close()}),t.qZA()),2&e){let r;t.xp6(6),t.Q6J("formGroup",n.formPoliza),t.xp6(13),t.Q6J("ngForOf",n.destinies),t.xp6(4),t.Q6J("value",null==n.formPoliza||null==(r=n.formPoliza.get("dias"))?null:r.value)("disabled",!0)}},dependencies:[f.sg,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u],styles:["@keyframes _ngcontent-%COMP%_displayBackground{0%{background-color:#0000001a}to{background-color:#0006}}.modal-backdrop[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#0006;position:absolute;inset:0;z-index:24;display:flex;justify-content:center;align-items:center;animation-name:_ngcontent-%COMP%_displayBackground;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}@keyframes _ngcontent-%COMP%_expandModal{0%{top:40%;opacity:0}to{top:50%;opacity:1}}.modal[_ngcontent-%COMP%]{width:800px;height:600px;margin:0 auto;display:table;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);z-index:25;background-color:#fff;border-radius:5px;transition:all .5s ease-in-out;display:flex;flex-direction:column;overflow:hidden;align-items:center;justify-content:flex-start}@media (min-width: 768px){.modal[_ngcontent-%COMP%]{animation-name:expandModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}}.modal-close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:10px;top:10px;transition:all .3s ease-in-out}.modal-close[_ngcontent-%COMP%]:hover{scale:1.05;transition:all .3s ease-in-out}.modal-header[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:var(--main-color);position:relative;color:#fff;font-weight:700;display:flex;align-items:center;justify-content:space-between;height:10vh}.modal-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:30px;object-fit:fill}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;margin-left:20px;font-weight:700}.loading-container[_ngcontent-%COMP%]{color:var(--main-color);font-size:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center;gap:20px;padding:20px}.info[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{padding:10px 20px}.info[_ngcontent-%COMP%]{overflow-y:auto}hr[_ngcontent-%COMP%]{border:1px solid var(--text-color);margin:10px 0}.title[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{border:none;width:100%;padding:10px 20px;background-color:#f04b46;color:#fff;border-radius:5px;cursor:pointer;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border:1px solid gainsboro;outline:none;color:var(--text-color)}.field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}span.close-btn[_ngcontent-%COMP%]{cursor:pointer}.info[_ngcontent-%COMP%]::-webkit-scrollbar{width:1em;height:1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efedf7;border-radius:100vw;margin-block:.1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gainsboro;border-radius:10px}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:grey;border-radius:10px}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:40%}.actions[_ngcontent-%COMP%]{width:100%;padding:20px}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:20px;color:#fff;font-weight:700;cursor:pointer;border-radius:8px;background-color:#f04b46}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}@keyframes _ngcontent-%COMP%_displayModal{0%{top:90%}to{top:0%}}@media (max-height:750px){.modal[_ngcontent-%COMP%]{height:60vh}}@media (max-width:1024px){.modal-backdrop[_ngcontent-%COMP%]{height:90vh}.modal[_ngcontent-%COMP%]{top:0vh;left:0;bottom:0;width:100%;height:100vh;overflow-y:auto;transform:none;animation-name:_ngcontent-%COMP%_displayModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.modal-header[_ngcontent-%COMP%]{justify-content:space-between;height:10vh}.modal-content[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:column;width:100%;height:100%;align-items:flex-start}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]{width:100%}.modal-header[_ngcontent-%COMP%]   span.close-btn[_ngcontent-%COMP%]{font-size:20px}}"]}),s})(),I=(()=>{var o;class s{constructor(e){this.document=e,this.resolver=(0,t.f3M)(t._Vd),this.injector=(0,t.f3M)(t.zs3)}open(e){const r=this.resolver.resolveComponentFactory(J).create(this.injector,[]);return r.instance.closeEvent.subscribe(()=>this.closeModal()),r.instance.submitEvent.subscribe(a=>{this.submitModal(a)}),r.instance.poliza=e.poliza,r.hostView.detectChanges(),this.document.body.appendChild(r.location.nativeElement),this.modalNotifier=new h.x,this.modalNotifier?.asObservable()}closeModal(){this.modalNotifier?.complete()}submitModal(e){this.modalNotifier?.next(e),this.closeModal()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.LFG(f.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})(),B=(()=>{var o;class s{constructor(){this.closeEvent=new t.vpe,this.submitEvent=new t.vpe,this.elementRef=(0,t.f3M)(t.SBq)}ngOnInit(){console.log(this.venta)}close(){this.elementRef.nativeElement.remove()}submit(){this.elementRef.nativeElement.remove(),this.submitEvent.emit(this.venta)}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-venta"]],inputs:{venta:"venta"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent"},decls:15,vars:0,consts:[[1,"modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-content"],[1,"field"],[1,"f-title"],[1,"actions"],["type","submit"],[1,"modal-backdrop",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Editar detalles de la Venta"),t.qZA(),t.TgZ(4,"span",2),t.NdJ("click",function(){return n.close()}),t._uU(5,"X"),t.qZA()(),t.TgZ(6,"form",3)(7,"div",4)(8,"span",5),t._uU(9,"Venta"),t.qZA()(),t._UZ(10,"div",4),t.TgZ(11,"div",6)(12,"button",7),t._uU(13," Modificar "),t.qZA()()()(),t.TgZ(14,"div",8),t.NdJ("click",function(){return n.close()}),t.qZA())},dependencies:[c._Y,c.JL,c.F],styles:["@keyframes _ngcontent-%COMP%_displayBackground{0%{background-color:#0000001a}to{background-color:#0006}}.modal-backdrop[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#0006;position:absolute;inset:0;z-index:24;display:flex;justify-content:center;align-items:center;animation-name:_ngcontent-%COMP%_displayBackground;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}@keyframes _ngcontent-%COMP%_expandModal{0%{top:40%;opacity:0}to{top:50%;opacity:1}}.modal[_ngcontent-%COMP%]{width:800px;height:900px;margin:0 auto;display:table;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);z-index:25;background-color:#fff;border-radius:5px;transition:all .5s ease-in-out;display:flex;flex-direction:column;overflow:hidden;align-items:center;justify-content:space-between}@media (min-width: 768px){.modal[_ngcontent-%COMP%]{animation-name:expandModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}}.modal-close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:10px;top:10px;transition:all .3s ease-in-out}.modal-close[_ngcontent-%COMP%]:hover{scale:1.05;transition:all .3s ease-in-out}.modal-header[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:var(--main-color);position:relative;color:#fff;font-weight:700;display:flex;align-items:center;justify-content:space-between;height:10vh}.modal-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:30px;object-fit:fill}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;margin-left:20px;font-weight:700}.loading-container[_ngcontent-%COMP%]{color:var(--main-color);font-size:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center;gap:20px;padding:20px}.info[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{padding:10px 20px}.info[_ngcontent-%COMP%]{overflow-y:auto}hr[_ngcontent-%COMP%]{border:1px solid var(--text-color);margin:10px 0}.title[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{border:none;width:100%;padding:10px 20px;background-color:#f04b46;color:#fff;border-radius:5px;cursor:pointer;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border:1px solid gainsboro;outline:none;color:var(--text-color)}.field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}span.close-btn[_ngcontent-%COMP%]{cursor:pointer}.info[_ngcontent-%COMP%]::-webkit-scrollbar{width:1em;height:1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efedf7;border-radius:100vw;margin-block:.1em}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:gainsboro;border-radius:10px}.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:grey;border-radius:10px}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:40%}.actions[_ngcontent-%COMP%]{width:100%;padding:20px}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:20px;color:#fff;font-weight:700;cursor:pointer;border-radius:8px;background-color:#f04b46}button[_ngcontent-%COMP%]:hover{background-color:var(--main-color)}@keyframes _ngcontent-%COMP%_displayModal{0%{top:90%}to{top:0%}}@media (max-height:750px){.modal[_ngcontent-%COMP%]{height:70vh}}@media (max-width:1024px){.modal-backdrop[_ngcontent-%COMP%]{height:90vh}.modal[_ngcontent-%COMP%]{top:0vh;left:0;bottom:0;width:100%;height:100vh;overflow-y:auto;transform:none;animation-name:_ngcontent-%COMP%_displayModal;animation-duration:.4s;animation-timing-function:cubic-bezier(.445,.05,.55,.95);animation-iteration-count:1}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.modal-header[_ngcontent-%COMP%]{justify-content:space-between;height:10vh}.modal-content[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:column;width:100%;height:100%;padding-top:40px;align-items:flex-start}.modal-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]{width:100%}.modal-header[_ngcontent-%COMP%]   span.close-btn[_ngcontent-%COMP%]{font-size:20px}}"]}),s})(),F=(()=>{var o;class s{constructor(e){this.document=e,this.resolver=(0,t.f3M)(t._Vd),this.injector=(0,t.f3M)(t.zs3)}open(e){const r=this.resolver.resolveComponentFactory(B).create(this.injector,[]);return r.instance.closeEvent.subscribe(()=>this.closeModal()),r.instance.submitEvent.subscribe(a=>{this.submitModal(a)}),r.instance.venta=e.venta,r.hostView.detectChanges(),this.document.body.appendChild(r.location.nativeElement),this.modalNotifier=new h.x,this.modalNotifier?.asObservable()}closeModal(){this.modalNotifier?.complete()}submitModal(e){this.modalNotifier?.next(e),this.closeModal()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.LFG(f.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})(),E=(()=>{var o;class s{constructor(){}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var L=g(51468);let D=(()=>{var o;class s{mapGender(e){return 1===e?"Masculino":"Femenino"}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["mod-card-beneficiario"]],inputs:{beneficiario:"beneficiario"},decls:47,vars:8,consts:[[1,"card"],[1,"top"],[1,"fa-solid","fa-person"],[1,"detail"],[1,"field"],[1,"f-title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t.TgZ(3,"span"),t._uU(4,"Detalles del beneficiario"),t.qZA()(),t._UZ(5,"hr"),t.TgZ(6,"div",3)(7,"div",4)(8,"span",5),t._uU(9,"Nombre(s)"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"div",4)(13,"span",5),t._uU(14,"Apellido(s)"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"div",4)(18,"span",5),t._uU(19,"Nro Identificacion"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()(),t.TgZ(22,"div",4)(23,"span",5),t._uU(24,"Fecha Nacimiento"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"div",4)(28,"span",5),t._uU(29,"Sexo"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()(),t.TgZ(32,"div",4)(33,"span",5),t._uU(34,"Origen"),t.qZA(),t.TgZ(35,"span"),t._uU(36),t.qZA()(),t.TgZ(37,"div",4)(38,"span",5),t._uU(39,"Email"),t.qZA(),t.TgZ(40,"span"),t._uU(41),t.qZA()(),t.TgZ(42,"div",4)(43,"span",5),t._uU(44,"telefono"),t.qZA(),t.TgZ(45,"span"),t._uU(46),t.qZA()()()()),2&e&&(t.xp6(11),t.hij(" ",n.beneficiario.primer_nombre," "),t.xp6(5),t.hij(" ",n.beneficiario.primer_apellido," "),t.xp6(5),t.hij(" ",n.beneficiario.nro_identificacion," "),t.xp6(5),t.Oqu(n.beneficiario.fecha_nacimiento),t.xp6(5),t.Oqu(n.mapGender(n.beneficiario.sexo)),t.xp6(5),t.Oqu(n.beneficiario.origen),t.xp6(5),t.hij(" ",n.beneficiario.email," "),t.xp6(5),t.Oqu(n.beneficiario.telefono))},styles:[".card[_ngcontent-%COMP%]{padding:20px;border:1px solid gainsboro;border-radius:8px;width:100%;display:flex;flex-direction:column}.top[_ngcontent-%COMP%]{padding:10px 0;font-size:15px;font-weight:700;color:var(--main-color)}.top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}hr[_ngcontent-%COMP%]{width:100%;border:1px solid gainsboro}.detail[_ngcontent-%COMP%]{display:flex;width:100%;height:-moz-fit-content;height:fit-content;padding:10px 20px;flex-direction:column;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;gap:10px;padding:10px 20px;border:1px solid gainsboro}.field[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}span.f-title[_ngcontent-%COMP%]{font-weight:700;font-size:12px}@media (max-width: 1024px){.detail[_ngcontent-%COMP%]{padding:0}.field[_ngcontent-%COMP%]{font-size:10px}}"]}),s})(),V=(()=>{var o;class s{ngOnInit(){console.log(this.poliza)}getStatusPoliza(e){switch(e){case 1:return"proceso";case 2:return"espera";case 3:return"activa";case 4:return"congelada";case 5:return"reembolso";case 6:return"anulada";default:return"vencida"}}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["mod-card-poliza"]],inputs:{poliza:"poliza"},decls:42,vars:8,consts:[[1,"card"],[1,"top"],[1,"fa-solid","fa-file"],[1,"detail"],[1,"field"],[1,"f-title"],[3,"classList"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t.TgZ(3,"span"),t._uU(4,"Detalles del Voucher"),t.qZA()(),t._UZ(5,"hr"),t.TgZ(6,"div",3)(7,"div",4)(8,"span",5),t._uU(9," Status "),t.qZA(),t.TgZ(10,"span",6),t._uU(11),t.qZA()(),t.TgZ(12,"div",4)(13,"span",5),t._uU(14,"Fecha Salida"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"div",4)(18,"span",5),t._uU(19,"Fecha de Retorno"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()(),t.TgZ(22,"div",4)(23,"span",5),t._uU(24,"Nro Dias"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"div",4)(28,"span",5),t._uU(29,"Destino"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()(),t.TgZ(32,"div",4)(33,"span",5),t._uU(34," Multiviajes "),t.qZA(),t.TgZ(35,"span"),t._uU(36),t.qZA()(),t.TgZ(37,"div",4)(38,"span",5),t._uU(39," Caducidad "),t.qZA(),t.TgZ(40,"span"),t._uU(41),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("classList","status "+n.getStatusPoliza(n.poliza.status)),t.xp6(1),t.Oqu(n.getStatusPoliza(n.poliza.status)),t.xp6(5),t.Oqu(n.poliza.fecha_salida),t.xp6(5),t.Oqu(n.poliza.fecha_retorno),t.xp6(5),t.Oqu(n.poliza.nro_dias),t.xp6(5),t.hij(" ",n.poliza.destino," "),t.xp6(5),t.hij(" ",1==n.poliza.multiviaje?"no":"Incluido"," "),t.xp6(5),t.hij(" ",n.poliza.fecha_caducidad.split("T")[0]," "))},styles:[".card[_ngcontent-%COMP%]{padding:20px;border:1px solid gainsboro;border-radius:8px;width:100%;display:flex;flex-direction:column}.top[_ngcontent-%COMP%]{padding:10px 0;font-size:15px;font-weight:700;color:var(--main-color)}.top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}hr[_ngcontent-%COMP%]{width:100%;border:1px solid gainsboro}.detail[_ngcontent-%COMP%]{display:flex;width:100%;height:-moz-fit-content;height:fit-content;padding:10px 20px;flex-direction:column;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;gap:10px;padding:10px 20px;border:1px solid gainsboro}.field[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}span.f-title[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.status[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid gainsboro;border-radius:8px;color:#fff}.status.proceso[_ngcontent-%COMP%]{background-color:var(--main-color);border:1px solid var(--main-color)}.status.espera[_ngcontent-%COMP%], .status.activa[_ngcontent-%COMP%]{background-color:green;border:1px solid green}.status.congelada[_ngcontent-%COMP%]{background-color:#00f;border:1px solid blue}.status.reembolso[_ngcontent-%COMP%], .status.anulada[_ngcontent-%COMP%], .status.vencida[_ngcontent-%COMP%]{background-color:var(--main-color);border:1px solid var(--main-color)}@media (max-width: 1024px){.detail[_ngcontent-%COMP%]{padding:0}}"]}),s})(),Q=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["mod-card-venta"]],inputs:{venta:"venta"},decls:41,vars:14,consts:[[1,"card"],[1,"top"],[1,"fa-solid","fa-money-bill"],[1,"detail"],[1,"field"],[1,"f-title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t.TgZ(3,"span"),t._uU(4,"Detalles de la venta"),t.qZA()(),t._UZ(5,"hr"),t.TgZ(6,"div",3)(7,"div",4)(8,"span",5),t._uU(9,"fecha de la Venta"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"div",4)(13,"span",5),t._uU(14,"Codigo Pasarela"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"div",4)(18,"span",5),t._uU(19," Precio "),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.ALo(22,"currency"),t.qZA()(),t.TgZ(23,"div",4)(24,"span",5),t._uU(25," Descuento "),t.qZA(),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"currency"),t.qZA()(),t.TgZ(29,"div",4)(30,"span",5),t._uU(31," Plus "),t.qZA(),t.TgZ(32,"span"),t._uU(33),t.ALo(34,"currency"),t.qZA()(),t.TgZ(35,"div",4)(36,"span",5),t._uU(37," Total Pago "),t.qZA(),t.TgZ(38,"span"),t._uU(39),t.ALo(40,"currency"),t.qZA()()()()),2&e&&(t.xp6(11),t.Oqu(n.venta.fecha_venta),t.xp6(5),t.Oqu(n.venta.client_secret),t.xp6(5),t.hij(" ",t.lcZ(22,6,n.venta.precio)," "),t.xp6(6),t.hij(" ",t.lcZ(28,8,n.venta.descuento)," "),t.xp6(6),t.hij(" ",t.lcZ(34,10,n.venta.plus)," "),t.xp6(6),t.hij(" ",t.lcZ(40,12,n.venta.total_pago)," "))},dependencies:[f.H9],styles:[".card[_ngcontent-%COMP%]{padding:20px;border:1px solid gainsboro;border-radius:8px;width:100%;display:flex;flex-direction:column}.top[_ngcontent-%COMP%]{padding:10px 0;font-size:15px;font-weight:700;color:var(--main-color)}.top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}hr[_ngcontent-%COMP%]{width:100%;border:1px solid gainsboro}.detail[_ngcontent-%COMP%]{display:flex;width:100%;height:-moz-fit-content;height:fit-content;padding:10px 20px;flex-direction:column;flex-wrap:wrap;gap:10px}.field[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;gap:10px;padding:10px 20px;border:1px solid gainsboro}.field[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}span.f-title[_ngcontent-%COMP%]{font-weight:700;font-size:12px}@media (max-width: 1024px){.detail[_ngcontent-%COMP%]{padding:0}}"]}),s})();function R(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onChangeStatus(6,"Anulada"))}),t._uU(1,"Anular"),t.qZA()}}function Y(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onChangeStatus(2,"Activada"))}),t._uU(1,"Descongelar"),t.qZA()}}function G(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onChangeStatus(4,"Congelada"))}),t._uU(1,"Congelar"),t.qZA()}}function K(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onChangeStatus(5,"Reembolso"))}),t._uU(1,"Reembolso"),t.qZA()}}function $(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"mod-card-venta",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.editVent())}),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("venta",i.venta)}}function H(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"mod-card-poliza",16),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.editPoliza())}),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("poliza",i.poliza)}}function X(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"mod-card-beneficiario",17),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.editBen())}),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("beneficiario",i.beneficiario)}}let W=(()=>{var o;class s{constructor(){this.polizasService=(0,t.f3M)(M.Ij),this.ventasService=(0,t.f3M)(M.v1),this.serviciosService=(0,t.f3M)(M.Co),this.beneficiariosService=(0,t.f3M)(M.yg),this.activatedRoute=(0,t.f3M)(C.gz),this.modalBenService=(0,t.f3M)(w),this.modalPolService=(0,t.f3M)(I),this.modalVenService=(0,t.f3M)(F),this.modalModifierService=(0,t.f3M)(E),this.sessionService=(0,t.f3M)(S.m),this.notificacionModalService=(0,t.f3M)(Z.g)}ngOnInit(){const e=new h.x,n=e.asObservable();this.onLoading(n),this.loadData(e)}editBen(){this.modalBenService.open({beneficiario:this.beneficiario,servicio:this.servicio,travelDate:this.poliza?.fecha_retorno}).subscribe({next:e=>{e.fecha_nacimiento=L.T.invert_date(e.fecha_nacimiento);const n=new h.x,r=n.asObservable();this.onLoading(r),this.beneficiariosService.update(this.beneficiario?.beneficiario_id,e).subscribe({next:a=>{n.complete(),this.beneficiario.fecha_nacimiento=e.fecha_nacimiento,this.beneficiario.origen=e.origen,this.beneficiario.primer_apellido=e.primer_apellido,this.beneficiario.primer_nombre=e.primer_nombre,this.beneficiario.sexo=e.sexo,this.beneficiario.telefono=e.telefono,this.onSuccess("Realizado")},error:a=>{n.complete(),this.onError(a)}})},error:e=>{},complete:()=>{}})}editPoliza(){this.modalPolService.open({poliza:this.poliza}).subscribe({next:e=>{const n=new h.x,r=n.asObservable();this.onLoading(r),this.polizasService.update(this.poliza.poliza_id,e).subscribe({next:a=>{this.poliza.fecha_salida=e.fecha_salida,this.poliza.fecha_retorno=e.fecha_retorno,this.poliza.nro_dias=e.dias,this.poliza.destino=e.destino,n.complete(),this.onSuccess("Poliza Actualizada Correctamente")},error:a=>{n.complete(),this.onError("Occurrio un error")}})},error:e=>{},complete:()=>{}})}onChangeStatus(e,n){const r=new h.x,a=r.asObservable();this.onLoading(a),this.polizasService.update(this.poliza?.poliza_id,{status:e,destino:this.poliza?.destino,fecha_salida:this.poliza?.fecha_salida,fecha_retorno:this.poliza?.fecha_retorno,username:this.sessionService.getUser(),observaciones:n,fecha_caducidad:this.poliza?.fecha_caducidad.split("T")[0]}).subscribe({next:m=>{r.complete(),this.poliza.status=e,this.onSuccess("Poliza Modificada correctamente")},error:m=>{r.complete(),this.onError(m)}})}editVent(){this.modalVenService.open({venta:this.venta}).subscribe({next:e=>{console.log(e)},error:e=>{},complete:()=>{}})}loadData(e){const r=this.activatedRoute.snapshot.queryParams.poliza_id;r&&this.polizasService.getOne(r).pipe((0,v.w)(a=>(this.poliza=a[0],this.poliza.fecha_retorno=this.poliza.fecha_retorno.split("T")[0],this.poliza.fecha_salida=this.poliza.fecha_salida.split("T")[0],this.ventasService.getOne(this.poliza.venta_id))),(0,v.w)(a=>(this.venta=a[0],this.venta.fecha_venta=this.venta.fecha_venta.split("T")[0],this.beneficiariosService.getOne(r))),(0,v.w)(a=>(this.beneficiario=a[0],this.beneficiario.fecha_nacimiento=this.beneficiario.fecha_nacimiento.split("T")[0],this.serviciosService.getOne(this.poliza.servicio_id)))).subscribe({next:a=>{this.servicio=a[0],e.complete()},error:a=>{console.log(a),e.complete()}})}onSuccess(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionModalService.show("Cargando",{size:u.$u.normal,positions:[u.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:14,vars:7,consts:[[1,"container"],[1,"top"],[1,"actions"],["class","anular",3,"click",4,"ngIf"],["class","active",3,"click",4,"ngIf"],["class","congelar",3,"click",4,"ngIf"],["class","refund",3,"click",4,"ngIf"],[1,"info"],[3,"venta","click",4,"ngIf"],[3,"poliza","click",4,"ngIf"],[3,"beneficiario","click",4,"ngIf"],[1,"anular",3,"click"],[1,"active",3,"click"],[1,"congelar",3,"click"],[1,"refund",3,"click"],[3,"venta","click"],[3,"poliza","click"],[3,"beneficiario","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Editar Poliza"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,R,2,0,"button",3),t.YNc(6,Y,2,0,"button",4),t.YNc(7,G,2,0,"button",5),t.YNc(8,K,2,0,"button",6),t.qZA()(),t._UZ(9,"hr"),t.TgZ(10,"div",7),t.YNc(11,$,1,1,"mod-card-venta",8),t.YNc(12,H,1,1,"mod-card-poliza",9),t.YNc(13,X,1,1,"mod-card-beneficiario",10),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",6!=(null==n.poliza?null:n.poliza.status)&&1!=(null==n.poliza?null:n.poliza.status)),t.xp6(1),t.Q6J("ngIf",4==(null==n.poliza?null:n.poliza.status)),t.xp6(1),t.Q6J("ngIf",2==(null==n.poliza?null:n.poliza.status)||3==(null==n.poliza?null:n.poliza.status)),t.xp6(1),t.Q6J("ngIf",6!=(null==n.poliza?null:n.poliza.status)&&1!=(null==n.poliza?null:n.poliza.status)&&5!=(null==n.poliza?null:n.poliza.status)),t.xp6(3),t.Q6J("ngIf",n.venta),t.xp6(1),t.Q6J("ngIf",n.poliza),t.xp6(1),t.Q6J("ngIf",n.beneficiario))},dependencies:[f.O5,D,V,Q],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:40px;width:100%;height:calc(100vh - 80px);overflow-y:auto}.top[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:10px}button[_ngcontent-%COMP%]{padding:15px 30px;border-radius:10px;background-color:#f04b46;border:none;color:#fff;cursor:pointer;font-size:15px;font-weight:700;transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{transition:all .3s ease-in-out;background-color:var(--main-color)}button.anular[_ngcontent-%COMP%]{background-color:#c19a0f}button.anular[_ngcontent-%COMP%]:hover{background-color:#dfb313}button.active[_ngcontent-%COMP%]{background-color:#1f9c06}button.active[_ngcontent-%COMP%]:hover{background-color:#2ac90a}button.congelar[_ngcontent-%COMP%]{background-color:#1f8462}button.congelar[_ngcontent-%COMP%]:hover{background-color:#0e9191}button.refund[_ngcontent-%COMP%]{background-color:plum}button.refund[_ngcontent-%COMP%]:hover{background-color:pink}hr[_ngcontent-%COMP%]{width:100%;border:1px solid var(--text-color);margin:20px 0}.info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;width:100%;padding:20px}.info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:30%;cursor:pointer;transition:.2s ease-in-out;height:-moz-fit-content;height:fit-content;border-radius:8px}.info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{transition:.2s ease-in-out;box-shadow:0 0 10px #00000080}@media (max-width:1024px){h1[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:20px 0}.container[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:40px 10px}.info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;padding:0}.actions[_ngcontent-%COMP%]{width:100%;flex-direction:column;flex-wrap:nowrap}.top[_ngcontent-%COMP%]{flex-direction:column;padding-bottom:80px}button[_ngcontent-%COMP%]{width:100%}}"]}),s})();var tt=g(21426),et=g(93997),nt=g(22096);function ot(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.makeCsvVen())}),t._UZ(1,"i",12),t.TgZ(2,"span"),t._uU(3,"Exportar"),t.qZA()()}}const it=function(o){return{poliza_id:o}};function at(o,s){if(1&o&&(t.TgZ(0,"tr",13)(1,"td")(2,"span",14),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"currency"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"currency"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"currency"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"currency"),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA()()),2&o){const i=s.$implicit,e=t.oxw();t.Q6J("routerLink","../"+i.venta_id)("queryParams",t.VKq(29,it,i.poliza_id)),t.xp6(2),t.Q6J("ngClass",e.getStatusClass(i.status)),t.xp6(1),t.Oqu(1==i.status?"Proceso":2==i.status?"Realizada":"Cancelada"),t.xp6(2),t.Oqu(i.fecha_venta.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(i.fecha_salida.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(i.fecha_retorno.split("T")[0].split("-").join("/")),t.xp6(2),t.Oqu(e.getOficces(i.office_id)[0]),t.xp6(2),t.hij(" ",i.username," "),t.xp6(2),t.hij(" ",i.poliza_id," "),t.xp6(2),t.hij(" ",e.getService(i.servicio_id)," "),t.xp6(2),t.hij(" ",i.primer_nombre," "),t.xp6(2),t.hij(" ",i.primer_apellido," "),t.xp6(2),t.hij(" ",t.lcZ(24,21,i.precio)," "),t.xp6(3),t.Oqu(t.lcZ(27,23,e.getPriceByItem(i.plus,i.cantidad))),t.xp6(3),t.Oqu(t.lcZ(30,25,e.getPriceByItem(i.descuento,i.cantidad))),t.xp6(3),t.Oqu(t.lcZ(33,27,e.getPriceByItem(i.total_pago,i.cantidad))),t.xp6(3),t.Oqu(i.edad),t.xp6(2),t.Oqu(i.origen),t.xp6(2),t.Oqu(i.destino),t.xp6(2),t.Oqu(i.email)}}const rt=[{path:"modificaciones",component:A,children:[{path:"list",component:_},{path:"filter",component:(()=>{var o;class s{constructor(){this.route=(0,t.f3M)(C.gz),this.reportesService=(0,t.f3M)(T.c),this.officeService=(0,t.f3M)(k.a),this.serviciosService=(0,t.f3M)(M.Co),this.ventas=[],this.servicios=[],this.oficina=[],this.filterForm=new c.cw({initialDate:new c.NI(null,[c.kI.required]),finalDate:new c.NI(null,[c.kI.required])}),this.notificacionModalService=(0,t.f3M)(Z.g),this.isWithFilter=!1,this.searchTerm$=new h.x}ngOnInit(){const e=new h.x,n=e.asObservable();this.serviciosService.getAll().pipe((0,v.w)(r=>(this.servicios=r,this.officeService.getAll()))).subscribe({next:r=>{this.oficina=r},error:r=>{e.complete(),this.onError(r)},complete:()=>{this.route.queryParams.subscribe(r=>{this.ventas=[];const{init:a,end:m}=this.route.snapshot.queryParams;a&&m?this.fetchReport(a,m,n,e):this.isWithFilter=!0})}}),this.searchTerm$.pipe((0,tt.b)(500),(0,et.x)(),(0,v.w)(r=>r?this.reportesService.getByNroIdentificacion(r):(0,nt.of)(this.ventas))).subscribe(r=>{this.ventas=r})}fetchReport(e,n,r,a){this.onLoading(r),this.reportesService.get(e,n).subscribe({next:m=>{a.complete(),this.ventas=m},error:m=>{a.complete(),this.onError(m)}})}onFilter(e){const n=new h.x,r=n.asObservable();this.fetchReport(e[0],e[1],r,n)}getPriceByItem(e,n){return"string"==typeof e?parseInt(e)/parseInt(n):e/parseInt(n)}getOficces(e){console.log({office_id:e}),console.log(this.oficina);const n=this.oficina.filter(r=>r.office_id==e).map(r=>r.office_name);return console.log({oficcess:n}),n}getService(e){return this.servicios.filter(n=>n.servicio_id==e).map(n=>n.servicio)}getStatusClass(e){return{success:2===e,deleted:3===e}}getStatusString(e){return 1==e?"realizado":"proceso"}getStatusPoliza(e){return"Activa"}makeCsvVen(){const e="reporte ventas-"+(new Date).toISOString().split("T")[0],r=this.ventas.map(a=>({venta:a.venta_id,status:this.getStatusString(a.status),oficina:this.getOficces(a.office_id),username:a.username,"fecha venta":a.fecha_venta.split("T")[0],"forma pago":"efectivo",cantidad:a.cantidad,precio:parseFloat(a.precio),total:parseFloat(a.total),plus:a.plus,descuento:parseFloat(a.descuento),"descuento extra":a.descuento_extra,"total pagado":a.total_pago,poliza:a.poliza_id,"status poliza":this.getStatusPoliza(a.poliza_st),destino:a.destino,dias:a.nro_dias,"fecha salida":a.fecha_salida.split("T")[0],"fecha retorno":a.fecha_retorno.split("T")[0],beneficiario:a.beneficiario_id,nombres:a.primer_nombre,apellidos:a.primer_apellido,identificacion:a.nro_identificacion,"fecha nacimiento":a.fecha_nacimiento.split("T")[0],edad:a.edad,origen:a.origen,email:a.email,telefono:a.telefono}));new O.J0(r,e,{fieldSeparator:";",quoteStrings:'"',decimalseparator:"locale",showLabels:!0,showTitle:!0,title:"Report data",useBom:!0,headers:["venta","status","Oficina","username","fecha venta","forma pago","cantidad","precio","total","plus","descuento","descuento extra","total_pago","poliza","status poliza","destino","dias","fecha salida","fecha retorno","beneficiario","nombres","apellidos","identificacion","fecha nacimiento","edad","origen","email","telefono"]})}onSuccess(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificacionModalService.show(e,{size:u.$u.normal,duration:3e3,positions:[u.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificacionModalService.show("Cargando",{size:u.$u.normal,positions:[u.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}onWriteInput(e){e.target.value&&this.searchTerm$.next(e.target.value)}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:55,vars:2,consts:[[1,"container"],[1,"top"],[1,"title"],[1,"filter"],["id","filter","type","text","placeholder","Nro Identificacion",3,"keyup"],["filter",""],[2,"width","100%"],["class","export",3,"click",4,"ngIf"],[1,"info"],[1,"table-data","info"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"export",3,"click"],[1,"fa-solid","fa-file-csv"],[3,"routerLink","queryParams"],[1,"status",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),t._uU(4,"Listado de Polizas"),t.qZA()()(),t.TgZ(5,"div",3)(6,"label"),t._uU(7,"Nro Identificacion"),t.qZA(),t.TgZ(8,"input",4,5),t.NdJ("keyup",function(a){return n.onWriteInput(a)}),t.qZA()(),t._UZ(10,"hr",6),t.YNc(11,ot,4,0,"button",7),t.TgZ(12,"div",8)(13,"div",9)(14,"table")(15,"thead")(16,"tr")(17,"th"),t._uU(18,"Status"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"fecha venta"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"fecha salida"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"fecha retorno"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Oficina"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Usuario"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Poliza"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Plan"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Nombres"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Apellidos"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Precio"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Plus"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Descuento"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Total"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Edad"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Origen"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Destino"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Email"),t.qZA()()(),t.TgZ(53,"tbody"),t.YNc(54,at,42,31,"tr",10),t.qZA()()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",n.ventas.length>0),t.xp6(43),t.Q6J("ngForOf",n.ventas))},dependencies:[C.rH,f.mk,f.sg,f.O5,f.H9],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:40px;width:100%;height:calc(100vh - 80px);overflow-y:auto}.top[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.title[_ngcontent-%COMP%]{display:flex;align-items:center}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:600;text-align:start;padding-left:20px}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background:none;border:3px solid var(--main-color);border-radius:10px;padding:10px 20px;color:var(--main-color);font-size:15px;transition:.3s all ease-in-out}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:.3s all ease-in-out;padding-left:5px}.top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transition:.3s all ease-in-out;padding-left:20px}hr[_ngcontent-%COMP%]{margin:20px 0;width:100%;border:1px solid gainsboro}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:20px;width:100%}.table-container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:10px}.table-data[_ngcontent-%COMP%]{width:100%;height:500px;overflow:auto;border-radius:2px;border:1px solid #ccc}.table-data[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info[_ngcontent-%COMP%]{padding:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px 0;border-bottom:1px solid black}table[_ngcontent-%COMP%]{width:120%}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;flex-wrap:wrap;gap:10px;width:30%}.row[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-end;justify-content:flex-end}.filter[_ngcontent-%COMP%]{width:100%;padding:20px;flex-wrap:wrap;gap:10px;display:flex}input[_ngcontent-%COMP%]{width:100%;padding:10px 20px;font-size:12px;outline:none;border-radius:8px;border:1px solid gainsboro;color:var(--text-color)}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:12px;border-radius:8px;border:none;color:#fff;cursor:pointer;transition:.3s ease-in-out}button.export[_ngcontent-%COMP%]{background-color:var(--body-bg);color:green;border:1px solid green;font-weight:700;transition:all .3s ease-in-out;margin:10px}button.export[_ngcontent-%COMP%]:hover{background-color:green;color:#fff;transition:all .3s ease-in-out}button.export[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.filters[_ngcontent-%COMP%]   button.valid[_ngcontent-%COMP%]{transition:.3s ease-in-out;background-color:#f04b46}.status[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid var(--main-color);color:var(--main-color);font-weight:700;border-radius:8px}.status.success[_ngcontent-%COMP%]{border:1px solid green;color:green}thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:var(--body-bg)}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:small;text-align:center;border-bottom:1px solid var(--border-color)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-size:small}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.vigente[_ngcontent-%COMP%]{color:green;border:1px solid green;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.congelada[_ngcontent-%COMP%]{color:gray;border:1px solid gray;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.uso[_ngcontent-%COMP%]{color:var(--main-color);border:1px solid var(--main-color);padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span.anulada[_ngcontent-%COMP%]{color:#ff4500;border:1px solid orangered;padding:2px 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--main-color);font-weight:700}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--main-color);border-radius:6px}.table-data.info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}@media (max-width: 1024px){.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px 10px}.container[_ngcontent-%COMP%]{height:calc(100vh - (80px + 10vh))}button.export[_ngcontent-%COMP%]{width:100%;margin:10px 0}}"]}),s})()},{path:":id",component:W}]}];let ct=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(rt),C.Bz]}),s})();var st=g(91352),lt=g(67582),dt=g(81837);let pt=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[w,I,F,E],imports:[ct,f.ez,C.Bz,st.I,lt.D,dt.m,c.u5,c.UX]}),s})()},21426:(N,y,g)=>{g.d(y,{b:()=>Z});var f=g(47394);class C extends f.w0{constructor(l,d){super()}schedule(l,d=0){return this}}const t={setInterval(x,l,...d){const{delegate:p}=t;return p?.setInterval?p.setInterval(x,l,...d):setInterval(x,l,...d)},clearInterval(x){const{delegate:l}=t;return(l?.clearInterval||clearInterval)(x)},delegate:void 0};var A=g(49039);const O={now:()=>(O.delegate||Date).now(),delegate:void 0};class h{constructor(l,d=h.now){this.schedulerActionCtor=l,this.now=d}schedule(l,d=0,p){return new this.schedulerActionCtor(this,l).schedule(p,d)}}h.now=O.now;const M=new class v extends h{constructor(l,d=h.now){super(l,d),this.actions=[],this._active=!1}flush(l){const{actions:d}=this;if(this._active)return void d.push(l);let p;this._active=!0;do{if(p=l.execute(l.state,l.delay))break}while(l=d.shift());if(this._active=!1,p){for(;l=d.shift();)l.unsubscribe();throw p}}}(class c extends C{constructor(l,d){super(l,d),this.scheduler=l,this.work=d,this.pending=!1}schedule(l,d=0){var p;if(this.closed)return this;this.state=l;const _=this.id,b=this.scheduler;return null!=_&&(this.id=this.recycleAsyncId(b,_,d)),this.pending=!0,this.delay=d,this.id=null!==(p=this.id)&&void 0!==p?p:this.requestAsyncId(b,this.id,d),this}requestAsyncId(l,d,p=0){return t.setInterval(l.flush.bind(l,this),p)}recycleAsyncId(l,d,p=0){if(null!=p&&this.delay===p&&!1===this.pending)return d;null!=d&&t.clearInterval(d)}execute(l,d){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const p=this._execute(l,d);if(p)return p;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,d){let _,p=!1;try{this.work(l)}catch(b){p=!0,_=b||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),_}unsubscribe(){if(!this.closed){const{id:l,scheduler:d}=this,{actions:p}=d;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(p,this),null!=l&&(this.id=this.recycleAsyncId(d,l,null)),this.delay=null,super.unsubscribe()}}});var T=g(79360),u=g(8251);function Z(x,l=M){return(0,T.e)((d,p)=>{let _=null,b=null,z=null;const q=()=>{if(_){_.unsubscribe(),_=null;const P=b;b=null,p.next(P)}};function U(){const P=z+x,w=l.now();if(w<P)return _=this.schedule(void 0,P-w),void p.add(_);q()}d.subscribe((0,u.x)(p,P=>{b=P,z=l.now(),_||(_=l.schedule(U,x),p.add(_))},()=>{q(),p.complete()},void 0,()=>{b=_=null}))})}}}]);